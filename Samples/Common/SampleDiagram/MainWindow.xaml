<Window x:Class="SampleDiagramPublic.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:sampleDiagramPublic="clr-namespace:SampleDiagramPublic"
        Title="Sample diagram" Height="768" Width="1024" WindowState="Maximized"
		WindowStartupLocation="CenterScreen">
	
	<Window.CommandBindings>
		<CommandBinding Command="{x:Static sampleDiagramPublic:MainWindow.AddCommand}"
						CanExecute="AddCommand_OnCanExecute"
						Executed="AddCommand_OnExecuted"/>
		
		<CommandBinding Command="{x:Static sampleDiagramPublic:MainWindow.RemoveCommand}"
						CanExecute="RemoveCommand_OnCanExecute"
						Executed="RemoveCommand_OnExecuted"/>

		<CommandBinding Command="{x:Static sampleDiagramPublic:MainWindow.SaveCommand}"
						CanExecute="SaveCommand_OnCanExecute"
						Executed="SaveCommand_OnExecuted"/>

		<CommandBinding Command="{x:Static sampleDiagramPublic:MainWindow.DiscardCommand}"
						CanExecute="DiscardCommand_OnCanExecute"
						Executed="DiscardCommand_OnExecuted"/>
	</Window.CommandBindings>

	<Grid Margin="3">
		<TabControl>
			<TabItem Header="Designer">
				<Grid>
					<Grid.ColumnDefinitions>
						<ColumnDefinition Width="150"/>
						<ColumnDefinition Width="3*"/>
					</Grid.ColumnDefinitions>
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="*"/>
					</Grid.RowDefinitions>
					
					<ToolBar Grid.Row="0" Grid.Column="0">
						<Button Content="Add" Width="50" 
								Command="{x:Static sampleDiagramPublic:MainWindow.AddCommand}"
								CommandParameter="{Binding ElementName=StrategiesListBox, Path=SelectedItem}"/>
						<Button Content="Remove" Width="50" 
								Command="{x:Static sampleDiagramPublic:MainWindow.RemoveCommand}"
								CommandParameter="{Binding ElementName=StrategiesListBox, Path=SelectedItem}"/>
					</ToolBar>

					<ListBox Grid.Row="1" Grid.Column="0" x:Name="StrategiesListBox" Margin="1">
						<ListBox.ItemContainerStyle>
							<Style TargetType="ListBoxItem">
								<EventSetter Event="MouseDoubleClick" Handler="Strategies_OnMouseDoubleClick" />
							</Style>
						</ListBox.ItemContainerStyle>
						<ListBox.ItemTemplate>
							<DataTemplate>
								<Grid Margin="1">
									<Grid.RowDefinitions>
										<RowDefinition/>
										<RowDefinition/>
									</Grid.RowDefinitions>
									
									<TextBlock Grid.Row="0" Text="{Binding Name}"/>
									<TextBlock Grid.Row="1" Foreground="Gray" Text="{Binding TypeId}"/>
								</Grid>
							</DataTemplate>
						</ListBox.ItemTemplate>
					</ListBox>

					<ToolBar Grid.Row="0" Grid.Column="1">
						<Label Content="Name:"/>
						<TextBox Width="150" Text="{Binding ElementName=DiagramEditorControl, Path=Composition.Name}"/>
						<Button Content="Save" Width="70"
								Command="{x:Static sampleDiagramPublic:MainWindow.SaveCommand}"
								CommandParameter="{Binding ElementName=DiagramEditorControl, Path=Composition}"/>
						<Button Content="Discard" Width="70"
								Command="{x:Static sampleDiagramPublic:MainWindow.DiscardCommand}"
								CommandParameter="{Binding ElementName=DiagramEditorControl, Path=Composition}"/>
					</ToolBar>

					<sampleDiagramPublic:DiagramEditorControl Grid.Row="1" Grid.Column="1" Margin="1" x:Name="DiagramEditorControl"/>
				</Grid>
			</TabItem>
			
			<TabItem Header="Emulation">
				<sampleDiagramPublic:EmulationControl x:Name="EmulationControl"/>
			</TabItem>
		</TabControl>
	</Grid>
</Window>
